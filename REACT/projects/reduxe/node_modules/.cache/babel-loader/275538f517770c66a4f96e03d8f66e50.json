{"ast":null,"code":"import { select, call, put, all, takeLatest } from 'redux-saga/effects';\nimport api from \"../../../services/api\";\nimport { addReserveSuccess, updateAmountReserve } from './actions';\n/**\n * O Reduxe Saga é um middleware \n */\n//function* é a memas coisa que async function\n\nfunction* addToReserve(_ref) {\n  let {\n    id\n  } = _ref;\n  const tripExist = yield select(state => state.reserve.find(trip => trip.id === id));\n\n  if (tripExist) {\n    //Aumentar o amount\n    const amount = tripExist.amount + 1;\n    yield put(updateAmountReserve(id, amount));\n  } else {\n    //yield é a mesma coisa que wait\n    const response = yield call(api.get, `trips/${id}`);\n    const data = { ...response.data,\n      amount: 1\n    }; //put funciona igual o dispatch dispara actions para os reducers\n\n    yield put(addReserveSuccess(data));\n  }\n}\n\nexport default all([takeLatest('ADD_RESERVE_REQUEST', addToReserve)]);","map":{"version":3,"names":["select","call","put","all","takeLatest","api","addReserveSuccess","updateAmountReserve","addToReserve","id","tripExist","state","reserve","find","trip","amount","response","get","data"],"sources":["/home/neto/Desktop/Studies/REACT/projects/reduxe/src/store/modules/reserve/sagas.js"],"sourcesContent":["import { select, call, put, all, takeLatest } from 'redux-saga/effects'\nimport api from \"../../../services/api\";\nimport { addReserveSuccess, updateAmountReserve } from './actions';\n\n/**\n * O Reduxe Saga é um middleware \n */\n\n//function* é a memas coisa que async function\nfunction* addToReserve({id}){\n    const tripExist = yield select(\n        state=> state.reserve.find(trip => trip.id === id)\n    );\n\n    if(tripExist){\n        //Aumentar o amount\n        const amount = tripExist.amount +1;\n        yield put(updateAmountReserve(id, amount))\n\n    }else{\n        //yield é a mesma coisa que wait\n        const response = yield call(api.get, `trips/${id}`);\n\n        const data = {\n            ...response.data,\n            amount: 1,\n        }\n\n        //put funciona igual o dispatch dispara actions para os reducers\n        yield put(addReserveSuccess(data))\n    }\n\n    \n}\n\nexport default all([\n    takeLatest('ADD_RESERVE_REQUEST', addToReserve)\n])"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,IAAjB,EAAuBC,GAAvB,EAA4BC,GAA5B,EAAiCC,UAAjC,QAAmD,oBAAnD;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,SAASC,iBAAT,EAA4BC,mBAA5B,QAAuD,WAAvD;AAEA;AACA;AACA;AAEA;;AACA,UAAUC,YAAV,OAA4B;EAAA,IAAL;IAACC;EAAD,CAAK;EACxB,MAAMC,SAAS,GAAG,MAAMV,MAAM,CAC1BW,KAAK,IAAGA,KAAK,CAACC,OAAN,CAAcC,IAAd,CAAmBC,IAAI,IAAIA,IAAI,CAACL,EAAL,KAAYA,EAAvC,CADkB,CAA9B;;EAIA,IAAGC,SAAH,EAAa;IACT;IACA,MAAMK,MAAM,GAAGL,SAAS,CAACK,MAAV,GAAkB,CAAjC;IACA,MAAMb,GAAG,CAACK,mBAAmB,CAACE,EAAD,EAAKM,MAAL,CAApB,CAAT;EAEH,CALD,MAKK;IACD;IACA,MAAMC,QAAQ,GAAG,MAAMf,IAAI,CAACI,GAAG,CAACY,GAAL,EAAW,SAAQR,EAAG,EAAtB,CAA3B;IAEA,MAAMS,IAAI,GAAG,EACT,GAAGF,QAAQ,CAACE,IADH;MAETH,MAAM,EAAE;IAFC,CAAb,CAJC,CASD;;IACA,MAAMb,GAAG,CAACI,iBAAiB,CAACY,IAAD,CAAlB,CAAT;EACH;AAGJ;;AAED,eAAef,GAAG,CAAC,CACfC,UAAU,CAAC,qBAAD,EAAwBI,YAAxB,CADK,CAAD,CAAlB"},"metadata":{},"sourceType":"module"}